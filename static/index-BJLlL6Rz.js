function x(o){return[/github\.com\/[^\/]+\/[^\/]+/,/qiita\.com\/[^\/]+\/items/,/qiita\.com\/tags/,/zenn\.dev\/[^\/]+\/articles/,/zenn\.dev\/[^\/]+\/books/,/zenn\.dev\/topics/,/dev\.classmethod\.jp\/articles/,/speakerdeck\.com\/[^\/]+\/[^\/]+/,/x\.com\/[^\/]+\/status/,/x\.com\/search/,/docswell\.com\/slide/].some(e=>e.test(o))?!1:[/https?:\/\/dev\.classmethod\.jp\/author\/[a-zA-Z0-9_-]+$/,/https?:\/\/github\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/zenn\.dev\/[a-zA-Z0-9_-]+$/,/https?:\/\/speakerdeck\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/x\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/qiita\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/www\.docswell\.com\/user\/[a-zA-Z0-9_-]+$/].some(e=>e.test(o))}function y(o){const r=/\[([^\]]+)\]\(([^)]+)\)/g;let t;for(;(t=r.exec(o))!==null;){const e=t[2];if(x(e))return!0}return!1}function k(o,r){if(!y(o))return o;const t={"dev.classmethod.jp":{name:"DevelopersIO",logo:"amazonaws",color:"orange",usernameRegex:/dev\.classmethod\.jp\/author\/([^\/\s\)]+)/},"github.com":{name:"GitHub",logo:"github",color:"black",usernameRegex:/github\.com\/([^\/\s\)]+)/},"zenn.dev":{name:"Zenn",logo:"zenn",color:"blue",usernameRegex:/zenn\.dev\/([^\/\s\)]+)/},"speakerdeck.com":{name:"Speaker--Deck",logo:"speakerdeck",color:"green",usernameRegex:/speakerdeck\.com\/([^\/\s\)]+)/},"x.com":{name:"X",logo:"x",color:"black",usernameRegex:/x\.com\/([^\/\s\)]+)/},"qiita.com":{name:"Qiita",logo:"qiita",color:"brightgreen",usernameRegex:/qiita\.com\/([^\/\s\)]+)/},"www.docswell.com":{name:"Docswell",logo:"readthedocs",color:"blue",usernameRegex:/www\.docswell\.com\/user\/([^\/\s\)]+)/}};let e=o;return Object.entries(t).forEach(([l,a])=>{const s=new RegExp(`\\[([^\\]]+)\\]\\(https?://${l.replace(/\./g,"\\.")}[^\\)]*\\)`,"g");e=e.replace(s,n=>{try{const c=n.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!c)return n;const d=c[2];if(!x(d))return n;const h=n.match(a.usernameRegex),f=h?h[1]:"";if(f){const m=encodeURIComponent(`${a.name}-@${f}`),p=encodeURIComponent(a.logo),u=encodeURIComponent(a.color),g=`https://img.shields.io/badge/${m}-${u}?style=flat&logo=${p}`;return`<a href="${d}" target="_blank" rel="noopener"><img src="${g}" alt="${a.name}" /></a>`}else{const m=encodeURIComponent(a.name),p=encodeURIComponent(a.logo),u=encodeURIComponent(a.color),g=`https://img.shields.io/badge/${m}-${u}?style=flat&logo=${p}`;return`<a href="${d}" target="_blank" rel="noopener"><img src="${g}" alt="${a.name}" /></a>`}}catch(c){return console.warn("Error converting account link:",c),n}})}),e}const v="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 shadow-sm hover:bg-blue-200 transition-colors duration-200",b=/^\d+\.\s/;function C(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function w(o,r){return`<li class="ml-4 mb-2 flex items-start"><span class="mr-2 text-blue-500">${r}</span><span>${i(o)}</span></li>`}function $(o){return o.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>').replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),'<em class="italic">$1</em>').replace(/`([^`]+)`/g,`<code class="${v}">$1</code>`)}function i(o){return $(o.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 hover:underline" target="_blank" rel="noopener">$1</a>'))}function R(o){var l;const r=o.trim().split(`
`);let t="",e=0;for(;e<r.length;){const a=r[e].trim();if(a==="---"){t+='<hr class="my-6 border-t border-gray-200">',e++;continue}if(a.startsWith("```")){let s="";for(e++;e<r.length;){const c=r[e];if(c.trim()==="```"||c.trim().startsWith("```"))break;s+=c+`
`,e++}const n=C(s.trim());t+=`<div class="my-6 bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"><pre class="p-4 overflow-x-auto bg-gray-50"><code class="text-sm text-gray-800 font-mono leading-6 whitespace-pre-wrap">${n}</code></pre></div>`,e<r.length&&e++;continue}if(a.startsWith("> ")){let s="";for(;e<r.length&&r[e].trim().startsWith("> ");)s+=r[e].trim().substring(2)+" ",e++;t+=`<blockquote class="my-4 pl-4 border-l-4 border-blue-500 bg-blue-50 py-3 pr-4 rounded-r-lg"><p class="text-gray-700 italic">${i(s.trim())}</p></blockquote>`;continue}if(b.test(a)){let s=1;for(;e<r.length&&b.test(r[e].trim());){const n=r[e].trim().replace(b,"");t+=w(n,`${s}.`),s++,e++}continue}if(a.startsWith("- ")){const s=a.substring(2);t+=w(s,"•"),e++;continue}if(a.includes("|")&&((l=r[e+1])!=null&&l.includes("---"))){const s=a.split("|").map(n=>n.trim()).filter(n=>n);if(r[e+1].includes("---")){for(t+='<div class="overflow-x-auto my-4"><table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm"><thead class="bg-gray-50"><tr>',s.forEach(n=>{t+=`<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">${i(n)}</th>`}),t+='</tr></thead><tbody class="divide-y divide-gray-200">',e+=2;e<r.length&&r[e].trim().includes("|");){const n=r[e].trim().split("|").map(c=>c.trim()).filter(c=>c);n.length>0&&(t+='<tr class="hover:bg-gray-50">',n.forEach(c=>{t+=`<td class="px-4 py-3 text-sm text-gray-900 border-b border-gray-200">${i(c)}</td>`}),t+="</tr>"),e++}t+="</tbody></table></div>";continue}}a?t+=i(a)+"<br>":t+="<br>",e++}return t}function z(o){const r=/- \[([^\]]+)\]\((https:\/\/(?:speakerdeck\.com\/player\/|www\.docswell\.com\/slide\/[^/]+\/embed?)[^)]+)\)/g;return o.replace(r,(t,e,l)=>{let a=e,s="";return l.includes("speakerdeck.com")?(a=e.replace(/\s*\\?\s*-\s*Speaker\s*Deck\s*$/i,""),s="speakerdeck-iframe"):l.includes("docswell.com")&&(a=e.replace(/\s*\|\s*ドクセル\s*$/i,""),s="docswell-iframe"),`<iframe class="${s}" frameborder="0" src="${l}" title="${a}" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777"></iframe>`})}function P(o){const r=/- \[([^\]]+)\]\((https:\/\/www\.youtube\.com\/embed\/[^\)]+)\)/g,t=/\[([^\]]+)\]\((https:\/\/www\.youtube\.com\/embed\/[^\)]+)\)/g,e="width: 100%; height: auto; aspect-ratio: 560 / 315; border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px;";let l=o.replace(r,(a,s,n)=>`<iframe style="${e}" src="${n}" title="${s}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`);return l=l.replace(t,(a,s,n)=>`<iframe style="${e}" src="${n}" title="${s}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`),l}function E(o){const r=/- \[([^\]]+)\]\((https:\/\/(?:dev\.classmethod\.jp\/articles\/[^)]+|qiita\.com\/[^\/]+\/items\/[^)]+|zenn\.dev\/[^\/]+\/articles\/[^)]+))\)/g;return o.replace(r,(t,e,l)=>`<iframe class="hatenablogcard" style="width:100%;height:155px;" title="${e}" src="https://hatenablog-parts.com/embed?url=${encodeURIComponent(l)}" width="300" height="150" frameborder="0" scrolling="no"></iframe>`)}function U(o,r){if(!o.trim())return"";let t=P(o);return t=z(t),t=E(t),t=k(t),t=R(t),$(t)}export{U as r};
